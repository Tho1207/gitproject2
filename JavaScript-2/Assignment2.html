<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment2</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <style>
        div h1{
            text-align: center;
        }
        h5{
            text-align: left;
        }
        .button1{
            width: 150px;
        }

        .button2{
            margin-left: 30%;
        }

        
        th, td{
            text-align: center;
        }
        .knd {
            margin-top: 5%;
            margin-left: 30%;
        }
        
        @media only screen and (max-width: 600px) {
            .knd {
            margin-top: 5%;
            margin-left: 35%;
        }}
        @media only screen and (min-width: 600px) {
            .knd {
            margin-top: 5%;
            margin-left: 35%;

        }}
        @media only screen and (min-width: 768px) {
            .knd {
            margin-top: 5%;
            margin-left: 40%;

        }}
        @media only screen and (min-width: 992px) {
            .knd {
            margin-top: 5%;
            margin-left: 45%;

        }}

        

    

    </style>
    
</head>
<body>
   
    <div class="container">
        <h1>Class Marksheet</h1>
        <br>
        <br>
        <form name="myForm" id="myForm" >
            <div class="form-group">
                <div class="row">
        
                    <div class="col-3"><h5>Name: </h5></div>
                    <div class="col"><input name = "fname" type="name" class="form-control" placeholder="Name" required></div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-3"><h5>Math'score: </h5></div>
                    <div class="col"><input name = "mathScore" type="name" class="form-control" required></div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-3"><h5>Physics' score:  </h5></div>
                    <div class="col"><input name = "Physics" type="name" class="form-control" required></div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-3"><h5>Chemistry'score: </h5></div>
                    <div class="col"><input type="name" class="form-control" name="chemistry" required></div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-5"></div>
                    <div class="col"><button type="button" class="btn btn-dark button1" id="btn">Enter</button>
                    </div>
                    
                </div>
            </div>
            
        </form>
    </div>
    <br>
    <br>
    
    
    <table class="table">
        <thead class="thead-light">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Math</th>
                <th>Physics</th>
                <th>Chemistry</th>
                <th>Average</th>
            </tr>


        </thead>
        <tbody  id="myTable">
            
        </tbody>
        
            
    </table>
    

    <div class="container">
        <div class="row">
            <div class="col"><button type="submit" class="btn btn-dark float-right" onclick="avgScore()">Calculate the average score</button></div>
            <div class="col"><button type="submit" class="btn btn-dark" onclick="goodStudent()">Good students' search</button></div>
        </div>
        
        
        
    </div>

    <div class= "container">
        <button type = "submit" class="btn btn-dark knd" data-toggle="modal" data-target="#exampleModal">Grade appeal</button>
    </div>

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Grade appeal</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                      <label for="name" style="font-weight:bold;">Name:</label>
                      <input type="text" class="form-control" id="requestname">
                    </div>
                    <div class="form-group">
                        <div class="form-group" style="font-weight:bold;">Subject's score that needs to be appealed:</div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="gridCheck1">
                            <label class="form-check-label" for="gridCheck1">
                              Math
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="gridCheck2">
                            <label class="form-check-label" for="gridCheck2">
                              Physics
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="gridCheck3">
                            <label class="form-check-label" for="gridCheck3">
                              Chemistry
                            </label>
                        </div>
                    </div>
                </form>
              
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Send</button>
            </div>
          </div>
        </div>
      </div>


    
    
    
    <script>
        // Create ID
        var button = document.getElementById("btn"),
        count = 0;
        button.onclick = function() {
            validateForm();
            
            
    
        }
    
        
        // Create score table
        var testScore = {};
        function testScores() {
           
            var Name =  document.forms["myForm"]["fname"].value;
            var mathScore =  document.forms["myForm"]["mathScore"].value;
            var physicsScore =  document.forms["myForm"]["Physics"].value;
            var chemistryScore =  document.forms["myForm"]["chemistry"].value;
            
    
            testScore.name = Name;
            testScore.math = mathScore;
            testScore.physics = physicsScore;
            testScore.chemistry = chemistryScore;
    
            insertTable();
        
        }
       
        
        
        
        // InsertTable
        
        function  insertTable() {
            var table = document.getElementById("myTable");
            var row = table.insertRow();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
           
    
            cell1.innerHTML = count;
            cell2.innerHTML = testScore.name;
            cell3.innerHTML = testScore.math;
            cell4.innerHTML = testScore.physics;
            cell5.innerHTML = testScore.chemistry;
            cell6.innerHTML = "?";
             //Delete info
            document.getElementById("myForm").reset();
            
        }
        //Calculate the average score
        function avgScore() {
        for (let row of myTable.rows) {
            var x = row.cells;
            var math0 = parseInt(x[2].innerHTML);
            var physics0 = parseInt(x[3].innerHTML);
            var chemistry0 = parseInt(x[4].innerHTML);
            var arg = (math0 + physics0 + chemistry0)/ 3;
            x[5].innerHTML = arg.toFixed(2);
            
            
        }

           
        }
         //Good students' search

        function goodStudent() {
        for (let row of myTable.rows) {
            var y = row.cells;
            var avg = parseFloat(y[5].innerHTML);
            if (avg >= 8.0 ) {
                row.style.backgroundColor = "red";
            }

        }
        }

        // Form validation
        function validateForm() {
            let x = document.forms["myForm"]["fname"].value;
            let a = document.forms["myForm"]["mathScore"].value;
            let b = document.forms["myForm"]["Physics"].value;
            let c = document.forms["myForm"]["chemistry"].value;
            if (x == "" || a == "" || b == "" || c== "") {
            alert("Vui lòng điền đầy đủ");
            document.getElementById("myForm").reset();
            return;
            } else if (isNaN(a) || isNaN(b) || isNaN(c) ){
            alert("Vui lòng nhập số cho phần điểm");
            document.getElementById("myForm").reset();
            return;
            
            } else if (a > 10 || b>10 || c>10 ){
            alert("Điểm phải thấp hơn 10");
            document.getElementById("myForm").reset();
            return;
            
            } else if (a<0 || b< 0 || c<0) {
            alert("Điểm phải lớn hơn 0");
            document.getElementById("myForm").reset();
            return;
            } else{
            count += 1;
            testScores();

        }
        


        
        }
    
        
    
    
    
    
        
       
    
    
       
    
    
        
        
        
    </script>
                
    
    
    
        


    
</body>
</html>